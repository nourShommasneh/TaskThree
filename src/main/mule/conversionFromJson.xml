<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:file="http://www.mulesoft.org/schema/mule/file" xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd">
	<sub-flow name="JsonToXml" doc:id="18dc25fe-ba10-44d0-beaa-1039110e8bc8" >
		<set-payload value="#[vars.backupVar]" doc:name="Set Payload" doc:id="ff55ed8b-17ab-424e-b8f1-c1c3dce1734a" />
		<ee:transform doc:name="XML" doc:id="e1134a7a-254f-41a8-b741-89e1947301d4" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
output application/xml
---
{
	root: {
		(payload map ( payload01 , indexOfPayload01 ) -> {
			row: {
				id: payload01.id,
				name: payload01.name,
				postId: payload01.postId,
				email: payload01.email,
				body: payload01.body
			
				
			}
		})
	}
}]]></ee:set-payload>
			</ee:message>
		</ee:transform>
		<file:write doc:name="Write" doc:id="3944e517-918b-4ad3-a305-ef7d7bfceae1" path="C:\Users\nshommasneh\Desktop\rres\JsonTo\commentsXml.xml"/>
	</sub-flow>
	<sub-flow name="JsonToCsv" doc:id="ac598bf8-7233-48b1-a866-3d54d5769f19" >
		<set-payload value="#[vars.backupVar]" doc:name="Set Payload" doc:id="2c9f03c1-3bca-49c2-baf0-bdbe5142f511" />
		<ee:transform doc:name="CSV" doc:id="d049fe80-c136-4a78-923b-f2355c9ec7c8" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
output application/csv 
separator = "|" , quoteValues = true , header = false
---
[{
	id: payload.id as String,
	name: payload.name,
	postId: payload.username,
	email: payload.email,
		body: payload.body
	
}]]]></ee:set-payload>
			</ee:message>
		</ee:transform>
		<file:write doc:name="Write" doc:id="1915cf4e-2e54-49f6-8f20-20ccd15f2500" path="C:\Users\nshommasneh\Desktop\rres\JsonTo\commentsCsv.csv"/>
	</sub-flow>
</mule>
